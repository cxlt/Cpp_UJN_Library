# Cpp_UJN_Library

_C++实现的,用于济南大学图书馆预约座位的可执行程序_

早上睡醒,先打开APP占座,喜欢的座位还是被别人抢走了?

借了多个账号占座,一不留神就失约?

网上的Python占座脚本,看不懂,不会用,版本不兼容?

#### Cpp_UJN_Library可以帮你.

## 说明
本程序可以自动预约_第二天_的座位.消除你抢座的痛苦.
## 安装
#### 运行环境
Windows All
#### 获取
点击链接下载

[预定座位](https://raw.githubusercontent.com/cym2018/Cpp_UJN_Library/master/app/library.exe)

[签到](https://raw.githubusercontent.com/cym2018/Cpp_UJN_Library/master/app/checkin.exe)

## 使用

#### 打开Library.exe所在的文件夹,新建文本文档,命名为"data.txt".

#### 打开data.txt,按照以下格式填写
###### data.txt内含空格,空行,可能会出错.
[_获取座位id的方法_]()
```
第1行:此行不会对程序的运行产生任何影响,可以保存预约信息的中文描述,方便查改
第2行:学号
第3行:密码
第4行:座位id  (参见"获取座位id的方法")
第5行:开始时间(单位:分钟)
第6行:结束时间
第7行开始填写第2个预约信息,以此类推.
```
填写完data.txt,双击运行library.exe,程序就可以正确的执行预约功能了.

如果这一步你也不想做,那么,可以使用Windows自带的计划任务程序做到定时执行.
#### 定时任务
###### 以新建每天早上5:00:30自动执行library.exe的计划任务为例.
```
1.单击开始菜单或键盘上的Windows键
2.输入"任务计划",打开"任务计划程序".
3.单击"任务计划程序库"
4.在右边栏找到"创建任务",单击打开
5.输入名称,描述
6.切换到"触发器"选项卡,单击"新建".
	7.在弹出的窗口中,开始任务,选择"按预定计划".
	8.频率选择"每天".
	9.选中"重复任务间隔",时间填写"1 分钟",持续时间填写"3 分钟".
	10.单击"确定".
11.切换到"操作"选项卡,单击"新建"
	12."操作"选择"启动程序".
	13.单击"浏览",选中"library.exe",打开
	14.复制程序的路径,删掉文件名,粘贴到"起始于"文本框中
		(如果"程序或脚本"为"C:/programfile/library.exe",则"起始于"为"C:/programfile")
	15.单击"确定"
16.切换到"条件"选项卡
	17.取消"只有在计算机使用交流电源时才启动此任务"
	18.选中"唤醒计算机运行此任务"
19.单击确定
```
###### 使用任务计划程序,您应该保证电脑在预定的时间处于开机,联网状态

## 其他值得注意的信息
#### 关于签到功能
签到需要连接图书馆的wifi"Lib_Student".

近期图书馆离馆禁止遗留物品,所以自动签到功能已经废了.

当然去图书馆时如果背着电脑,这个程序还是可以节省几分钟打开APP的时间的.

###### 如果你有一部废弃的安卓手机的话可以试试我的另一个项目[Android_UJN]()

#### 日志部分
对大部分类型的返回内容自动处理,确保日志文件的可读性.
#### 注明出处
服务器返回内容的格式转换部分来自[zhangxueyang1的文章:c++ utf8与std::string字符编码转换](https://blog.csdn.net/zhangxueyang1/article/details/54178195)

网络编程部分来自[微软文档](https://docs.microsoft.com/zh-cn/windows/desktop/WinSock/windows-sockets-start-page-2)
## 已知问题
1预约时间早于服务器规定时间,程序无法自动处理返回的消息,生成一段很长的日志.
#### 许可
如被抄袭,不胜感激

## 其他
出现任何问题,可以发邮件联系[我](cym2018.xyz@qq.com).
另外,我觉得我写的MySocket类,是真的牛批.

###### data.txt样例
```
#这是第一行,学号220161000000,密码123456,座位号23456,开始时间是上午8(*60)点,结束时间是中午12(*60)点
220161000000
123456
23456
480
720
```
###### data.txt样例
